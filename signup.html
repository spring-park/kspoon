<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>K-Spoon: Sign Up</title>
    <script src="https://cdn.jsdelivr.net/npm/react@18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/react-dom@18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@babel/standalone@7.20.6/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        function Navbar() {
            return (
                <nav className="bg-blue-600 text-white p-4 sticky top-0 z-10">
                    <div className="container mx-auto flex justify-between items-center">
                        <h1 className="text-2xl font-bold">K-Spoon</h1>
                        <a href="index.html" className="hover:text-blue-200">Back to Home</a>
                    </div>
                </nav>
            );
        }

        function SignupForm() {
            const [formData, setFormData] = React.useState({
                name: '',
                email: '',
                nationality: '',
                stayDuration: '',
                dietaryRestrictions: '',
                diningFrequency: 'Daily',
                challenges: '',
                desiredFeatures: ''
            });
            const [submitStatus, setSubmitStatus] = React.useState('');

            const handleChange = (e) => {
                const { name, value } = e.target;
                setFormData({ ...formData, [name]: value });
            };

            const handleSubmit = async () => {
                if (!formData.name || !formData.email || !formData.nationality || !formData.stayDuration) {
                    setSubmitStatus('Please fill in all required fields.');
                    return;
                }
                try {
                    const response = await fetch('https://elpsqgesacyghsdldzqs.supabase.co', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'apikey': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVscHNxZ2VzYWN5Z2hzZGxkenFzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM2MjU2OTUsImV4cCI6MjA2OTIwMTY5NX0.iySRbqvuXsMrhjStEvyGtdd4U2ahjXd84RvPnwWnDOo',
                            'Authorization': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVscHNxZ2VzYWN5Z2hzZGxkenFzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM2MjU2OTUsImV4cCI6MjA2OTIwMTY5NX0.iySRbqvuXsMrhjStEvyGtdd4U2ahjXd84RvPnwWnDOo'
                        },
                        body: JSON.stringify({
                            name: formData.name,
                            email: formData.email,
                            nationality: formData.nationality,
                            stay_duration: formData.stayDuration,
                            dietary_restrictions: formData.dietaryRestrictions || null,
                            dining_frequency: formData.diningFrequency,
                            challenges: formData.challenges || null,
                            desired_features: formData.desiredFeatures || null
                        })
                    });
                    if (response.ok) {
                        setSubmitStatus('Thank you for signing up! Your feedback will help improve K-Spoon.');
                        setFormData({
                            name: '',
                            email: '',
                            nationality: '',
                            stayDuration: '',
                            dietaryRestrictions: '',
                            diningFrequency: 'Daily',
                            challenges: '',
                            desiredFeatures: ''
                        });
                    } else {
                        setSubmitStatus('Error submitting form. Please try again.');
                    }
                } catch (error) {
                    setSubmitStatus('Error submitting form. Please try again.');
                    console.error('Error:', error);
                }
            };

            return (
                <section className="py-20 bg-gray-50">
                    <div className="container mx-auto max-w-2xl">
                        <h2 className="text-3xl font-bold text-center mb-8 text-blue-800">Join K-Spoon</h2>
                        <p className="text-center text-gray-600 mb-8">Share your information and help us shape the future of K-Spoon!</p>
                        <div className="bg-white p-8 rounded-lg shadow-lg">
                            <div className="space-y-6">
                                <div>
                                    <label className="block text-gray-700 font-semibold mb-2">Full Name *</label>
                                    <input
                                        type="text"
                                        name="name"
                                        value={formData.name}
                                        onChange={handleChange}
                                        placeholder="Enter your name"
                                        className="w-full p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-600"
                                    />
                                </div>
                                <div>
                                    <label className="block text-gray-700 font-semibold mb-2">Email Address *</label>
                                    <input
                                        type="email"
                                        name="email"
                                        value={formData.email}
                                        onChange={handleChange}
                                        placeholder="Enter your email"
                                        className="w-full p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-600"
                                    />
                                </div>
                                <div>
                                    <label className="block text-gray-700 font-semibold mb-2">Nationality *</label>
                                    <input
                                        type="text"
                                        name="nationality"
                                        value={formData.nationality}
                                        onChange={handleChange}
                                        placeholder="Enter your nationality"
                                        className="w-full p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-600"
                                    />
                                </div>
                                <div>
                                    <label className="block text-gray-700 font-semibold mb-2">How long are you staying in Korea? *</label>
                                    <div className="flex space-x-4">
                                        <label className="flex items-center">
                                            <input
                                                type="radio"
                                                name="stayDuration"
                                                value="short-term"
                                                checked={formData.stayDuration === 'short-term'}
                                                onChange={handleChange}
                                                className="mr-2 focus:ring-blue-600"
                                            />
                                            Short-term traveler (less than 1 year)
                                        </label>
                                        <label className="flex items-center">
                                            <input
                                                type="radio"
                                                name="stayDuration"
                                                value="long-term"
                                                checked={formData.stayDuration === 'long-term'}
                                                onChange={handleChange}
                                                className="mr-2 focus:ring-blue-600"
                                            />
                                            Long-term resident (more than 1 year)
                                        </label>
                                    </div>
                                </div>
                                <div>
                                    <label className="block text-gray-700 font-semibold mb-2">Dietary Restrictions (e.g., allergies, religious preferences)</label>
                                    <textarea
                                        name="dietaryRestrictions"
                                        value={formData.dietaryRestrictions}
                                        onChange={handleChange}
                                        placeholder="List any allergies (e.g., peanuts, dairy) or dietary preferences (e.g., halal, vegan)"
                                        className="w-full p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-600 h-24"
                                    ></textarea>
                                </div>
                                <div>
                                    <label className="block text-gray-700 font-semibold mb-2">How often do you dine out in Korea?</label>
                                    <select
                                        name="diningFrequency"
                                        value={formData.diningFrequency}
                                        onChange={handleChange}
                                        className="w-full p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-600"
                                    >
                                        <option>Daily</option>
                                        <option>Weekly</option>
                                        <option>Monthly</option>
                                        <option>Rarely</option>
                                    </select>
                                </div>
                                <div>
                                    <label className="block text-gray-700 font-semibold mb-2">What challenges do you face when dining in Korea?</label>
                                    <textarea
                                        name="challenges"
                                        value={formData.challenges}
                                        onChange={handleChange}
                                        placeholder="Describe any difficulties (e.g., language barriers, finding suitable menus)"
                                        className="w-full p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-600 h-24"
                                    ></textarea>
                                </div>
                                <div>
                                    <label className="block text-gray-700 font-semibold mb-2">What features would you like in a dining app?</label>
                                    <textarea
                                        name="desiredFeatures"
                                        value={formData.desiredFeatures}
                                        onChange={handleChange}
                                        placeholder="E.g., multilingual menus, allergy filters, community reviews"
                                        className="w-full p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-600 h-24"
                                    ></textarea>
                                </div>
                                <button
                                    onClick={handleSubmit}
                                    className="w-full bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700"
                                >
                                    Submit
                                </button>
                                {submitStatus && (
                                    <p className={`text-center mt-4 ${submitStatus.includes('Error') ? 'text-red-600' : 'text-green-600'}`}>
                                        {submitStatus}
                                    </p>
                                )}
                            </div>
                        </div>
                    </div>
                </section>
            );
        }

        function Footer() {
            return (
                <footer className="bg-blue-600 text-white py-6">
                    <div className="container mx-auto text-center">
                        <p>&copy; 2025 K-Spoon. All rights reserved.</p>
                    </div>
                </footer>
            );
        }

        function App() {
            return (
                <div>
                    <Navbar />
                    <SignupForm />
                    <Footer />
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>